<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transações</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex flex-col min-h-screen">
    <header class="p-4 sm:p-6 bg-white shadow">
      <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800">
        Transações
      </h1>
    </header>

    <main class="flex-1 p-4 sm:p-6 lg:max-w-4xl lg:mx-auto mb-24 space-y-4">
      <div class="bg-white p-4 sm:p-6 rounded-2xl shadow">
        <ul id="lista-transacoes" class="divide-y divide-gray-200"></ul>
      </div>

      <a
        href="adicionar.html"
        class="block bg-blue-500 hover:bg-blue-600 text-white text-center font-bold py-3 sm:py-4 rounded-2xl mt-4 text-base sm:text-lg"
      >
        + Adicionar Transação
      </a>
    </main>

    <nav
      class="fixed bottom-0 w-full bg-blue-500 shadow-2xl border-b-4 border-black/20 z-50 p-3 sm:p-4 flex justify-around lg:justify-center lg:gap-12"
    >
      <a
        href="home.html"
        class="flex flex-col items-center text-white hover:text-blue-200 hover:bg-blue-600 rounded-xl px-2"
      >
        <img
          src="imagens/home.png"
          alt="Ícone"
          style="width: 30px; height: 30px"
        />
        <span class="text-sm sm:text-base">Home</span>
      </a>
      <a
        href="transacoes.html"
        class="flex flex-col items-center text-white bg-blue-700 rounded-xl px-1"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-7"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z" />
        </svg>
        <span class="text-sm sm:text-base">Transações</span>
      </a>
      <a
        href="adicionar.html"
        class="flex flex-col items-center text-white hover:text-blue-200 hover:bg-blue-600 rounded-xl px-1"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-7"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 4v16m8-8H4"
          />
        </svg>
        <span class="text-sm sm:text-base">Adicionar</span>
      </a>
      <a
        href="relatorios.html"
        class="flex flex-col items-center text-white hover:text-blue-200 hover:bg-blue-600 rounded-xl px-1"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-7"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 3v18h18M9 17v-5h6v5"
          />
        </svg>
        <span class="text-sm sm:text-base">Relatórios</span>
      </a>
      <a
        href="config.html"
        class="flex flex-col items-center text-white hover:text-blue-200 hover:bg-blue-600 rounded-xl px-2"
      >
        <img
          src="imagens/settings.png"
          alt="Ícone"
          style="width: 30px; height: 30px"
        />
        <span class="text-sm sm:text-base">Config.</span>
      </a>
    </nav>

    <script>
      function carregarTransacoes() {
        const lista = document.getElementById("lista-transacoes");
        lista.innerHTML = "";

        const transacoes = JSON.parse(localStorage.getItem("transacoes")) || [];

        if (transacoes.length === 0) {
          lista.innerHTML =
            "<li class='text-center text-gray-500 py-4'>Nenhuma transação registrada.</li>";
          return;
        }

        transacoes.forEach((t, index) => {
          const li = document.createElement("li");
          li.className =
            "flex justify-between items-center p-3 sm:p-4 border-b border-gray-200";
          li.innerHTML = `
        <div>
          <p class="text-gray-800 font-semibold">${t.descricao}</p>
          <p class="text-gray-500 text-sm">${t.categoria} • ${t.data}</p>
        </div>
        <div class="flex items-center gap-3">
          <span class="font-bold ${
            t.tipo === "entrada" ? "text-green-500" : "text-red-500"
          }">
            ${t.tipo === "entrada" ? "+" : "-"} R$ ${Number(t.valor).toFixed(2)}
          </span>
          <button onclick="removerTransacao(${index})" 
            class="text-red-500 hover:text-red-700 text-xl font-bold">×</button>
        </div>
      `;
          lista.appendChild(li);
        });
      }

      function removerTransacao(index) {
        if (!confirm("Deseja remover esta transação?")) return;
        const transacoes = JSON.parse(localStorage.getItem("transacoes")) || [];
        transacoes.splice(index, 1);
        localStorage.setItem("transacoes", JSON.stringify(transacoes));
        carregarTransacoes();
      }

      document.addEventListener("DOMContentLoaded", carregarTransacoes);
    </script>
  </body>
</html>
